<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HuopaProxy in iframe example</title>
    <style>
        body {
            padding: 0;
            margin: 0;
            height: 100vh;
        }

        iframe {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            border-style: none;
        }
    </style>
</head>
<body>
    <iframe id="huopaproxy" src="./min.html"></iframe>
    <script>
        let title = null;
        const frame = document.getElementById("huopaproxy");
        frame.onload = async () => {
            frame.contentWindow.postMessage({
                type: "openURL",
                url: "https://google.com"
            }, "*");
            setTimeout(() => frame.contentWindow.postMessage({
                type: "getTitle",
            }, "*"), 2000);
        }
        window.onmessage = (e) => {
            if (!e?.source) return;
            const type = e.data?.type;
            if (type == "getTitle") {
                title = e.data.data;
                console.log(title);
            }
        }
    </script>
</body>
</html>